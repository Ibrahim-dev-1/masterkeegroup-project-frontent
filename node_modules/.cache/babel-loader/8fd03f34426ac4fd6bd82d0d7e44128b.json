{"ast":null,"code":"import _slicedToArray from \"D:\\\\MASTER KEE PROJECT\\\\MASTER PROJECT\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\MASTER KEE PROJECT\\\\MASTER PROJECT\\\\client\\\\src\\\\component\\\\UploadModal.js\";\nimport React from 'react';\nexport default function (prop) {\n  const fromEmailRef = React.createRef();\n  const toEmailRef = React.createRef();\n  const fileRef = React.createRef();\n\n  const _React$useState = React.useState(\"\"),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        error = _React$useState2[0],\n        setError = _React$useState2[1];\n\n  const handleClick = () => {\n    // const to = toEmailRef.current.value;\n    // const from = fromEmailRef.current.value;\n    const filePath = fileRef.current.value;\n\n    if (!filePath) {\n      setError(\"Vous devez selectionnez le fichier à uploader avant de cliquez sur uploder\");\n      return setTimeout(function () {\n        setError(\"\");\n      }, 3000);\n    }\n\n    if (error === \"\") {\n      let xhr = new XMLHttpRequest();\n      let form = document.getElementById(\"myForm\");\n      let formData = new FormData(form);\n      xhr.open(\"post\", \"http://localhost:9001/upload\");\n\n      xhr.onreadystatechange = function (ev) {\n        if (xhr.readyState === 4) {\n          if (xhr.status === 200) {\n            prop.isLoading(xhr.responseText);\n          }\n        }\n      };\n\n      xhr.upload.addEventListener('progress', data => {\n        let progressBar = document.querySelector('.progress-bar');\n        const myCloseButton = document.getElementById(\"myCloseButton\");\n        const total = data.total;\n        let progress = Math.floor(data.loaded * 100 / total);\n        progressBar.style = \"width:\" + progress + \"%\";\n        progressBar.textContent = progress + \"%\";\n\n        if (total === data.loaded) {\n          myCloseButton.click();\n          progressBar.style = \"width: 0%\";\n          progressBar.textContent = \"0%\";\n        }\n      });\n      return xhr.send(formData);\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"modal fade\",\n    \"data-keyboard\": \"true\",\n    \"data-backdrop\": \"static\",\n    id: \"kratosModal\",\n    tabIndex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"exampleModalCenterTitle\",\n    \"aria-hidden\": \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal-dialog modal-dialog-centered\",\n    role: \"document\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"modal-title\",\n    id: \"exampleModalCenterTitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Upload\\xE9\"), React.createElement(\"button\", {\n    type: \"button\",\n    id: \"myCloseButton\",\n    className: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"\\xD7\"))), React.createElement(\"div\", {\n    className: \"modal-body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, error && React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    role: \"alert\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, error), React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    id: \"input-b1\",\n    name: \"input-b1\",\n    type: \"file\",\n    className: \"file\",\n    \"data-browse-on-zone-click\": \"true\",\n    multiple: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"progress\",\n    style: {\n      height: \"35px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"progress-bar\",\n    role: \"progressbar\",\n    style: {\n      width: 0\n    },\n    \"aria-valuenow\": \"30\",\n    \"aria-valuemin\": \"0\",\n    \"aria-valuemax\": \"100\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"0%\"))), React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-danger\",\n    \"data-dismiss\": \"modal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"Ferm\\xE9\"), React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-outline-primary\",\n    onClick: handleClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fa fa-upload p-1\",\n    \"aria-hidden\": \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), \"Envoy\\xE9\")))));\n}","map":{"version":3,"sources":["D:\\MASTER KEE PROJECT\\MASTER PROJECT\\client\\src\\component\\UploadModal.js"],"names":["React","prop","fromEmailRef","createRef","toEmailRef","fileRef","useState","error","setError","handleClick","filePath","current","value","setTimeout","xhr","XMLHttpRequest","form","document","getElementById","formData","FormData","open","onreadystatechange","ev","readyState","status","isLoading","responseText","upload","addEventListener","data","progressBar","querySelector","myCloseButton","total","progress","Math","floor","loaded","style","textContent","click","send","height","width"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nexport default function(prop) {\r\n\r\nconst fromEmailRef = React.createRef();\r\nconst toEmailRef = React.createRef();\r\nconst fileRef = React.createRef();\r\n\r\nconst [error, setError] =  React.useState(\"\");\r\nconst handleClick = () => {\r\n    // const to = toEmailRef.current.value;\r\n    // const from = fromEmailRef.current.value;\r\n    const filePath = fileRef.current.value;\r\n    \r\n    if(!filePath){\r\n        setError(\"Vous devez selectionnez le fichier à uploader avant de cliquez sur uploder\")\r\n        return setTimeout(function(){setError(\"\")}, 3000)\r\n    }\r\n    \r\n    if(error === \"\"){\r\n        let xhr = new XMLHttpRequest();\r\n        let form = document.getElementById(\"myForm\");\r\n        let formData = new FormData(form);\r\n        xhr.open(\"post\", \"http://localhost:9001/upload\");\r\n\r\n        xhr.onreadystatechange = function(ev){\r\n            if(xhr.readyState === 4){\r\n                if(xhr.status === 200){\r\n                    prop.isLoading(xhr.responseText);\r\n                }\r\n            }\r\n        }\r\n\r\n        xhr.upload.addEventListener('progress', (data) => {\r\n            let progressBar = document.querySelector('.progress-bar');\r\n            const myCloseButton = document.getElementById(\"myCloseButton\");\r\n            const total = data.total;\r\n            let progress = Math.floor((data.loaded *100)/total);\r\n\r\n            progressBar.style = \"width:\"+progress+\"%\"\r\n            progressBar.textContent = progress + \"%\"\r\n            if( total === data.loaded ){\r\n                myCloseButton.click()\r\n                progressBar.style = \"width: 0%\"\r\n                progressBar.textContent = \"0%\"\r\n            }\r\n        })\r\n        \r\n\r\n        return xhr.send(formData);\r\n    }\r\n    \r\n}\r\n\r\nreturn (\r\n    <div className=\"modal fade\" data-keyboard=\"true\" data-backdrop=\"static\" id=\"kratosModal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n    <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div className=\"modal-content\">\r\n        <div className=\"modal-header\">\r\n            <h5 className=\"modal-title\" id=\"exampleModalCenterTitle\">Uploadé</h5>\r\n            <button type=\"button\" id=\"myCloseButton\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n        </div>\r\n        <div className=\"modal-body\">\r\n        {error && <div className=\"alert alert-danger\" role=\"alert\">{error}</div>}\r\n            <form>\r\n                <div>\r\n                    <input id=\"input-b1\" name=\"input-b1\" type=\"file\" className=\"file\" data-browse-on-zone-click=\"true\" multiple />\r\n                </div>\r\n            </form>\r\n            <div className=\"progress\" style={{ height: \"35px\"}}>\r\n                <div className=\"progress-bar\" role=\"progressbar\" style={{width: 0}}  aria-valuenow=\"30\" aria-valuemin=\"0\" aria-valuemax=\"100\">0%</div>\r\n            </div>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n            <button type=\"button\" className=\"btn btn-danger\" data-dismiss=\"modal\">Fermé</button>\r\n            <button \r\n                type=\"button\" \r\n                className=\"btn btn-outline-primary\" \r\n                onClick={handleClick}\r\n            ><i className=\"fa fa-upload p-1\" aria-hidden=\"true\"></i>Envoyé</button>\r\n        </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n)\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}